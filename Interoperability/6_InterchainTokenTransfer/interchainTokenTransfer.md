ここでは、1つのブロックチェーンから別のブロックチェーンにメッセージとトークンを送信するコントラクトを実装します。

## 概要

このコントラクトは大部分が前のセクションと似ています。`constructor`は`Gateway`と`Gas Service`のアドレスを受け取ります。

次に、ソースチェーンから呼び出される関数`sendToMany`を作成し、以下のパラメータを取ります。

1. `_destinationChain`: トランザクションが送信されるチェーン
2. `_destinationAddress`: トランザクションが送信されるデスティネーションチェーン上のアドレス
3. `_destinationAddresses`: トークン転送と一緒に送信するメッセージ。この例では、トークン転送の受信アドレスのリストです。
4. `_symbol`: 送信されるトークンのシンボル
5. `_amount`: 送信されるトークンの量

関数内には、ガスが送信されていることを確認する`require`文がすでに実装されています。

また、呼び出し元のウォレットからこのスマートコントラクトにトークンを送信するための基本的なERC20機能もあります。コントラクトは`approve`関数を呼び出し、最終的にGatewayがその代わりに資金を転送できるようにします。

最後に、`\_executeWithToken()`関数も最初から実装されています。

この関数は次のパラメータを使用します：

1. `_payload`: ソースチェーンからのメッセージ
2. `_tokenSymbol`: ソースチェーンから送信されたトークンのシンボル
3. `_amount`: ソースチェーンから送信されたトークンの量

これらのパラメータを使用して、`\_execute()`関数は送信されたトークンを適切な受信者に送信できます。

## チャレンジ

ここでのチャレンジは、Axelar GatewayとGas Serviceを使用してインターチェーントランザクションをトリガーする`sendToMany()`関数を完成させることです。

最終的には、このコントラクトを2つのテストネットにデプロイし、`sendToMany()`関数をトリガーして、<a href="https://testnet.axelarscan.io" target="_blank">Axelarscan（テストネット）ブロックエクスプローラー</a>でライブトランザクションを確認できるようにします。

### テストノート

ノート1: 推奨されるERC20は`aUSDC`で、これはUSDCトークンのラップバージョンです。<a href= "https://docs.axelar.dev/resources/rpc/resources" target="_blank">Discordファウセットボット</a>から取得できます。`sendToMany()`関数をトリガーする際には、第4パラメータにシンボル`aUSDC`を渡します。

ノート2: `sendToMany()`関数をトリガーする際には、コントラクトが`aUSDC`トークンをあなたの代わりに使用できるように`approve`することを忘れないでください。さもないと、49行目の`transferFrom()`でエラーが発生します。
